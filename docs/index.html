<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BEAMMWorks: Portal</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="preload" href="assets/font.woff2" as="font" type="font/woff2" crossorigin>
</head>
<body>

  <div id="stars"></div>

  <main class="portal">
    <h1 class="glitch" data-text="BEAMMWORKS">BEAMMWORKS</h1>
    <div class="core">
      <div class="pulse-ring"></div>
      <div class="core-text">Welcome, dreambuilder</div>
    </div>
    <div class="streak">
      ðŸ”¥ Streak: <span id="streak-count">0</span> days
      <button onclick="checkIn()">Check In</button>
    </div>
  </main>

  <!-- Optional Ambient Sound -->
  <audio id="ambience" autoplay loop>
    <source src="assets/ambient.mp3" type="audio/mpeg" />
  </audio>

  <script>
    // Streak Logic
    const streakKey = "dailyStreak";
    const lastCheckKey = "lastCheck";

    function getToday() {
      return new Date().toISOString().split('T')[0];
    }

    function checkIn() {
      const today = getToday();
      const lastCheck = localStorage.getItem(lastCheckKey);
      let streak = parseInt(localStorage.getItem(streakKey)) || 0;

      if (lastCheck === today) return alert("Already checked in!");

      const yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yDate = yesterday.toISOString().split('T')[0];

      streak = (lastCheck === yDate) ? streak + 1 : 1;

      localStorage.setItem(streakKey, streak);
      localStorage.setItem(lastCheckKey, today);
      updateStreak();
    }

    function updateStreak() {
      const streak = localStorage.getItem(streakKey) || 0;
      document.getElementById("streak-count").textContent = streak;
    }

    updateStreak();
  </script>

</body>
</html>
